<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="description" content="Tempora Sanguinis giocata nel browser."/>
  <meta http-equiv="Cache-control" content="no-cache"/>
  <meta http-equiv="Expires" content="-1"/>
  <meta http-equiv="Pragma" content="no-cache" />
  
  <title>TS Web Client</title>

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="modules/modules.min.css?hash=1.4.4">
  <link rel="stylesheet" href="css/client.css?hash=1.4.4">
  <link rel="manifest" href="ts2client.webmanifest">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/dark.min.css">

  <script src="modules/corejs.min.js?hash=1.4.4"></script>
  <script src="modules/jquery.min.js?hash=1.4.4" onload="if (typeof module != 'undefined') {window.$ = window.jQuery = module.exports;}"></script>
  <script src="modules/jqwidgets_module.min.js?hash=1.4.4"></script>
  <script src="modules/codemirror_module.min.js?hash=1.4.4"></script>
  <script src="modules/tern_module.min.js?hash=1.4.4"></script>
  
  <script>

    // set caching to max one month, this prevents browsers from indefinitely caching mudslinger even if the server code has been updated
    // in case the server does not have response headers that prevent it
    var dt = new Date();dt.setDate((dt.getDate()+31));
    document.write('<meta http-equiv="expires" content="' + dt.toGMTString() + '"/>');

    $(document).ready(function() {
      if (typeof(Mudslinger)!=undefined) {
        Mudslinger.init();
      } else {
        setTimeout(() => window.location.reload(), 3000);
      }
    });
    console.log(typeof require)
    if (typeof require !== 'undefined') {
      const {ipcRenderer} = require('electron');
      console.log("IPC_RENDERER: "+!!ipcRenderer)
      window.ipcRenderer = ipcRenderer;
      if (ipcRenderer) ipcRenderer.on('set-text', (event, selector, text) => {
          $(selector).text(text);
      });
    }
  </script>
</head>
<body>
<div id="mudslinger">
  <div id="menuBar">
    <ul>
      <li id="connessione">Connessione
        <ul>
          <li data-option-name="use-profile"><img style='float: left; margin-right: 5px;width:16px;height:16px;' src='images/menu/profiles.png' />Personaggi</li>
          <li type="separator"></li>
          <li id="menuBar-conn-disconn" data-option-name="connect"><img style='float: left; margin-right: 5px;width:16px;height:16px;' src='images/menu/connect.png' />Connetti</li>
          <li id="menuBar-conn-log" data-option-name="log"><label for="menuBar-chkLog"><input id="menuBar-chkLog" type="checkbox">Registrazione (Log)</label></li>
        </ul>
      </li>
      <li id="impostazioni" class="configMenuItem" data-option-name="config">Impostazioni
        <ul>
          <li data-option-name="text-settings">Testo
            <ul>
              <li data-option-name="text-color">Colori
                <ul>
                  <li data-option-name="white-on-black">Bianco su Nero</li>
                  <li data-option-name="green-on-black">Verde su Nero</li>
                  <li data-option-name="black-on-gray">Nero su Grigio</li>
                  <li data-option-name="black-on-white">Nero su Bianco</li>
                  <li type="separator"></li>
                  <li data-option-name="enable-color"><label for="menuBar-chkEnableColor"><input id="menuBar-chkEnableColor" type="checkbox" checked>Colori ANSI</label></li>
                </ul>
              </li>
              <li>Font
                <ul>
                  <li data-option-name="monospace">Predefinito</li>
                  <li data-option-name="courier">Courier</li>
                  <li data-option-name="consolas">Consolas</li>
                  <li data-option-name="lucida">Lucida Console</li>
                  <li data-option-name="vera">Bitstream Vera Sans</li>
                </ul>
              </li>
              <li>Grandezza
                <ul>
                  <li data-option-name="smallest-font">Microscopico</li>
                  <li data-option-name="extra-small-font">Minuscolo</li>
                  <li data-option-name="small-font">Piccolo</li>
                  <li data-option-name="normal-font">Normale</li>
                  <li data-option-name="large-font">Grande</li>
                  <li data-option-name="extra-large-font">Enorme</li>
                </ul>
              </li>
              <li type="separator"></li>
              <li data-option-name="enable-utf8"><label for="menuBar-chkEnableUtf8"><input id="menuBar-chkEnableUtf8" type="checkbox" checked>UTF-8</label></li>
            </ul>
          </li>
          
          <li data-option-name="wrap-lines"><label for="menuBar-chkWrapLines"><input id="menuBar-chkWrapLines" type="checkbox" checked>Capolinea</label></li>
              
          <li type="separator"></li>
          <li data-option-name="enable-triggers"><label for="menuBar-chkEnableTrig"><input id="menuBar-chkEnableTrig" type="checkbox" checked>Triggers</label></li>
          <li data-option-name="enable-aliases"><label for="menuBar-chkEnableAlias"><input id="menuBar-chkEnableAlias" type="checkbox" checked>Aliases</label></li>
          <li data-option-name="enable-sounds"><label for="menuBar-chkEnableSound"><input id="menuBar-chkEnableSound" type="checkbox" checked>Suoni</label></li>
          <li type="separator"></li>
          <li data-option-name="numpadconfig">Tastierino Numerico</li>
          <li type="separator"></li>
          <li>Avanzate
            <ul>
              <li data-option-name="enable-mxp" title="Il protocollo MXP permette al server di mandare variabili ed altro al client (preferibile abilitato)"><label for="menuBar-chkEnableMxp"><input id="menuBar-chkEnableMxp" type="checkbox" checked>MXP</label></li>
              <li data-option-name="enable-mxp-images" title="Se abilitato il mud mostrera immagini in certe room"><label for="menuBar-chkEnableMxpImages"><input id="menuBar-chkEnableMxpImages" type="checkbox" checked>Immagini MXP</label></li>
              <li data-option-name="log-time"><label><input type="checkbox">Marca tempo nell'output</label></li>
              <li data-option-name="debug-scripts"><label><input type="checkbox">Informazioni scripting (debug)</label></li>
              <li type="separator"></li>
              <li data-option-name="reset-settings">Ripristina</li>
              <li data-option-name="import-settings">Importa Configurazione</li>
              <li data-option-name="export-settings">Esporta Configurazione</li>
              <li data-option-name="import-layout">Importa Layout</li>
              <li data-option-name="export-layout">Esporta Layout</li>
            </ul>
          </li>
        </ul>
      </li>
      <li id="scripting">Scripting
        <ul>
          <li data-option-name="aliases">Aliases</li>
          <li data-option-name="triggers">Triggers</li>
          <li data-option-name="variables">Variabili</li>
          <li data-option-name="classes">Classi</li>
          <li data-option-name="events">Eventi</li>
          <li type="separator"></li>
          <li data-option-name="script">Creazione e test di script</li>
          <li type="separator"></li>
          <li data-option-name="exportclass">Esporta scripts</li>
          <li data-option-name="importscript">Importa scripts</li>
          <li type="separator"></li>
          <li data-option-name="update-triggers"><img style='float: left; margin-right: 5px;width:16px;height:16px;' src='images/menu/update.png' />Aggiorna preimpostati</li>
          <li>Avanzate
            <ul>
              <li data-option-name="base_aliases">Alias preimpostati</li>
              <li data-option-name="base_triggers">Triggers preimpostati</li>
              <li data-option-name="base_events">Eventi preimpostati</li>
              <li type="separator"></li>
              <li data-option-name="base_exportclass">Esporta da preimpostati</li>
              <li data-option-name="base_importscript">Importa in preimpostati</li>
            </ul>
          </li>
        </ul>
      </li>
      <li id="altro">Altro
        <ul>
          <li data-option-name="windows">Finestre
            <ul id="windowList">
              <li>&lt;nessuna&gt;</li>
            </ul>
          </li>
          <li data-option-name="mapper">Mapper</li>
          <li data-option-name="about">Versione</li>
          <li data-option-name="help">Help</li>
        </ul>
      </li>
      <li data-require-api="true" data-option-name="docs"><a href="/docs/" target="_blank">Docs</a></li>
      <li data-require-api="true" data-option-name="contact">Contact</li>
      <li data-require-api="true" data-option-name="profiles"><a href="/user/profiles">Profiles</a></li>
    </ul>
  </div>
  <div id="mainWin" style="color:white;">
    <div id="content-wrapper">
      <div id="column-left">
        <div id="column-left-top">
        </div>
        <div id="column-left-bottom">
        </div>
      </div>
      <div id="column-center">
          <div id="row-top">
            <div id="row-top-left">
            </div>
            <div id="row-top-right">
            </div>
          </div>
          <div id="row-center">
            <div class="fill-parent">
              <pre tabindex="2" id="winOutput" role="alert" aria-label="Testo MUD" aria-live="assertive" aria-relevant="additions text" class="outputText"></pre>
            </div>
            <div id="notificationTop">
              <div id="notificationTopContent">
              </div>
            </div>
            <div id="notificationBottom">
              <div id="notificationBottomContent">
              </div>
            </div>
            <div id="notification-top">
            </div>
            <div id="notification-bottom">  
            </div>
          </div>
          <div id="row-bottom">
            <div id="row-bottom-left">
            </div>
            <div id="row-bottom-right">
            </div>
          </div>
          <div id="row-input">
            <div id="cmdCont">
              <textarea autofocus rows="1" id="cmdInput" aria-label="Barra comandi" autocomplete="off" autocorrect="off" spellcheck="false" autocapitalize="off" style="-webkit-user-modify: read-write-plaintext-only;"></textarea>
              <div class="chkCmdInputCmdStackCont">
                <input id="chkCmdTriggers" type="checkbox" checked title="Triggers">
                <label for="chkCmdTriggers" class="checker checkerTriggers" aria-live="polite" title="Abilita o disabilita Triggers"></label>
              </div>
              <div class="chkCmdInputCmdStackCont">
                <input id="chkCmdAliases" type="checkbox" checked title="Aliases">
                <label for="chkCmdAliases" class="checker checkerAliases" aria-live="assertive" title="Abilita o disabilita Alias"></label>
              </div>
              <div class="chkCmdInputCmdStackCont">
                <input id="chkCmdStack" type="checkbox" checked>
                <label for="chkCmdStack" class="checker checkerStack" aria-live="assertive" title="Comandi multipli con ;"></label>
              </div>
            </div> 
          </div>
      </div>
      <div id="column-right">
        <div id="column-right-top">
        </div>
        <div id="column-right-bottom">
        </div>
      </div>
    </div>
  </div>
</div>
<div class="preloading">
  <div class="vertical-center">
    <h3 class="slideLeftRight">Caricamento in corso ...</h3>
  </div>
</div>
</body>
</html>
